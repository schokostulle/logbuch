// =============================================================
// logout.js ‚Äì Supabase-only Logout
// Version: 2.0 ‚Äì 02.11.2025
// Beendet die Supabase-Session vollst√§ndig
// =============================================================

document.addEventListener("DOMContentLoaded", async () => {
  try {
    // üö™ Abmelden √ºber Supabase Auth
    const { error } = await window.supabase.auth.signOut();
    if (error) {
      console.error("Fehler beim Abmelden:", error);
      alert("Beim Abmelden ist ein Fehler aufgetreten.");
    } else {
      console.info("‚úÖ Benutzer erfolgreich abgemeldet.");
    }

    // üïê Kurze Verz√∂gerung, um Feedback zu zeigen
    setTimeout(() => {
      alert("Du wurdest erfolgreich abgemeldet.");
      window.location.href = "login.html"; // alternativ: "gate.html"
    }, 800);
  } catch (err) {
    console.error("‚ùå Unerwarteter Fehler beim Logout:", err);
    alert("Fehler beim Abmelden. Bitte erneut versuchen.");
    window.location.href = "login.html";
  }
});