/* =========================================================
   Logbuch – Maritime UI (Neuaufbau)
   Thema: dunkel, matt, ruhige Blau-/Grau-/Brauntöne
   Typografie: Serif (Bronze/Gold-Töne)
   Autor: Kapitän
   ========================================================= */

/* ---------- Design-Variablen ---------- */
:root {
  /* Grundfarben */
  --bg-deep: #0b1d2a;          /* tiefer Ozean */
  --bg-panel: #131a21;         /* Paneele */
  --bg-elev: #161f27;          /* erhöhte Flächen */
  --bg-muted: #10161c;         /* abgesetzt */
  --line: #384350;             /* Rahmen */
  --line-soft: #2b3440;

  /* Akzent/Typo (Bronze/Gold) */
  --text: #d8c79a;
  --text-soft: #bfae7f;
  --text-dim: #9b8d69;
  --heading: #e2d3a6;

  /* Interaktion */
  --focus: #c5b17a;
  --accent: #a77a3a;           /* bronzen */
  --accent-quiet: #7a5a2a;
  --danger: #c45a5a;
  --ok: #67a36e;
  --warn: #c7a24a;

  /* Tabellen */
  --row-alt: #17222b;
  --row-hover: rgba(255,255,255,0.05);
  --th-bg: #1b242c;
  --th-shadow: rgba(0,0,0,0.35);
  --cell-sep: #2a3642;

  /* Karte */
  --ocean: #7fc3ff;            /* helles Blau (Ozean) */
  --island-free: #a9d6a6;      /* mildes Grün (herrscherlos) */
  --island-solo: #d46fb3;      /* Magenta (allianzlos, besetzt) */

  /* Allianzfarben (freundlich/neutral/feindlich) */
  --ally-friend: #6aa9ff;      /* ruhig */
  --ally-neutral: #c3c3c3;     /* neutral grau */
  --ally-enemy-1: #ff6a6a;     /* grell, unterscheidbar */
  --ally-enemy-2: #ff9b4a;     /* grell, unterscheidbar */
  --ally-enemy-3: #ffd34a;     /* grell, unterscheidbar */

  /* Abmessungen */
  --sidebar-max: 20vw;
  --sidebar-min: 240px;
  --sidebar-mobile: 78px;
  --radius: 10px;
  --radius-sm: 6px;
  --pad: 16px;
  --gap: 12px;

  /* Schrift */
  --font-serif: Georgia, "Times New Roman", serif;
  --font-mono: ui-monospace, SFMono-Regular, Menlo, Consolas, "Liberation Mono", monospace;

  /* Schatten subtil */
  --shadow: 0 0 12px rgba(0,0,0,0.28);
}

/* ---------- Reset & Grundlayout ---------- */
* { box-sizing: border-box; }
html, body { height: 100%; }

body {
  margin: 0;
  display: flex;
  background: var(--bg-deep);
  color: var(--text);
  font-family: var(--font-serif);
  line-height: 1.4;
}

/* ---------- Seitenrahmen ---------- */
aside {
  flex: 0 0 clamp(var(--sidebar-min), var(--sidebar-max), 20%);
  max-width: clamp(var(--sidebar-min), var(--sidebar-max), 20%);
  min-width: var(--sidebar-min);
  background: #2a3137;
  border-right: 1px solid var(--line);
  display: flex;
  flex-direction: column;
}

aside header {
  padding: 1.2rem 1rem;
  border-bottom: 1px solid var(--line);
  color: var(--heading);
  text-transform: uppercase;
  letter-spacing: 0.08em;
  font-weight: 700;
}

nav { padding: .25rem; }
nav ul { list-style: none; padding: 0; margin: 0; display: flex; flex-direction: column; gap: 2px; }

nav a {
  display: flex;
  align-items: center;
  gap: .6rem;
  padding: .7rem .8rem;
  text-decoration: none;
  color: var(--text);
  border-radius: var(--radius-sm);
  border: 1px solid transparent;
}
nav a:hover { background: #323a42; border-color: var(--line); }
nav a.active {
  background: #39424a;
  color: var(--heading);
  border-color: var(--line);
  box-shadow: inset 0 0 8px rgba(255,235,180,0.15);
  font-weight: 700;
}

nav a .icon { width: 1.4rem; text-align: center; }
nav a .text { white-space: nowrap; }

/* ---------- Mobile Sidebar: nur Symbole ---------- */
@media (max-width: 900px) {
  aside {
    flex-basis: var(--sidebar-mobile);
    max-width: var(--sidebar-mobile);
    min-width: var(--sidebar-mobile);
  }
  nav a { justify-content: center; padding: .8rem .4rem; }
  nav a .text { display: none; }
}

main {
  flex: 1 1 auto;
  min-width: 0;
  display: flex;
  flex-direction: column;
}

/* ---------- Kopfzeile ---------- */
.topbar {
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: var(--gap);
  padding: .9rem 1.2rem;
  background: var(--bg-deep);
  border-bottom: 1px solid var(--line);
}

.topbar h1 {
  margin: 0;
  font-size: 1.3rem;
  color: var(--heading);
  text-transform: uppercase;
  letter-spacing: .06em;
}

.user-status {
  color: var(--text-soft);
  font-weight: 600;
}

/* ---------- Inhaltsbereich ---------- */
.content {
  padding: 1.2rem;
  display: grid;
  gap: 1rem;
}

h2 {
  margin: 0;
  padding-bottom: .4rem;
  border-bottom: 1px solid var(--line);
  color: var(--heading);
  text-transform: uppercase;
  letter-spacing: .05em;
  font-size: 1.05rem;
}
h3 {
  margin: .2rem 0 0 0;
  color: var(--text-soft);
  font-size: 1rem;
  letter-spacing: .02em;
}

/* ---------- Panels / Karten ---------- */
.panel {
  background: var(--bg-panel);
  border: 1px solid var(--line);
  border-radius: var(--radius);
  box-shadow: var(--shadow);
  padding: 1rem;
}

/* ---------- Formulare ---------- */
form { display: grid; gap: .8rem; }

label {
  font-weight: 700;
  color: var(--text-soft);
  text-transform: uppercase;
  letter-spacing: .04em;
  font-size: .85rem;
}

input[type="text"],
input[type="number"],
input[type="file"],
textarea,
select {
  width: 100%;
  background: var(--bg-elev);
  border: 1px solid var(--line);
  border-radius: var(--radius-sm);
  color: var(--text);
  padding: .55rem .6rem;
  font-family: var(--font-serif);
  font-size: .95rem;
}

textarea { min-height: 140px; resize: vertical; }

input:focus, textarea:focus, select:focus {
  outline: 2px solid var(--focus);
  outline-offset: 1px;
}

/* Buttons */
button, .btn {
  background: #2d363e;
  color: var(--text);
  border: 1px solid var(--line);
  border-radius: var(--radius-sm);
  padding: .5rem .9rem;
  font-weight: 700;
  text-transform: uppercase;
  cursor: pointer;
}
button:hover, .btn:hover { background: #38424b; }
.btn--primary { background: var(--accent); border-color: var(--accent-quiet); }
.btn--primary:hover { filter: brightness(1.05); }
.btn--danger { background: var(--danger); border-color: #8f3e3e; }
.btn--ok { background: var(--ok); border-color: #4e7e54; }

/* Badges / Hinweise */
.badge { display: inline-block; padding: .1rem .4rem; border-radius: 999px; font-size: .8rem; border: 1px solid var(--line); }
.badge--ok { background: rgba(103,163,110,0.15); color: #a3d1a8; }
.badge--warn { background: rgba(199,162,74,0.15); color: #e3c980; }
.badge--danger { background: rgba(196,90,90,0.15); color: #efb1b1; }

/* Live-Meldungen / Feed */
.live-feed {
  display: grid; gap: .6rem;
  padding: .7rem; background: var(--bg-panel);
  border: 1px solid var(--line); border-radius: var(--radius);
  max-height: 40vh; overflow: auto;
}

/* ---------- Tabellen (kompakt + sticky Header) ---------- */
.table-wrapper {
  background: var(--bg-panel);
  border: 1px solid var(--line);
  border-radius: var(--radius);
  box-shadow: var(--shadow);
  overflow: auto;
  max-height: 70vh;
}

.table {
  width: 100%;
  border-collapse: collapse;
  min-width: max(720px, 100%);
}

.table thead th {
  position: sticky; top: 0;
  background: var(--th-bg);
  color: var(--heading);
  text-transform: uppercase;
  font-weight: 800;
  font-size: .8rem;
  letter-spacing: .04em;
  padding: .5rem .6rem;
  border-bottom: 1px solid var(--cell-sep);
  box-shadow: 0 2px 4px var(--th-shadow);
  text-align: center;
  white-space: nowrap;
}

.table tbody td {
  border-top: 1px solid var(--cell-sep);
  padding: .45rem .6rem;
  font-size: .9rem;
  text-align: center;
  white-space: nowrap;
}

.table tbody tr:nth-child(even) { background: var(--row-alt); }
.table tbody tr:hover { background: var(--row-hover); }

/* Spalten sanft einfärben (wechselnd) */
.table thead th:nth-child(odd),
.table tbody td:nth-child(odd) { background: rgba(255,255,255,0.01); }

/* Rollenfarben (Berichte) */
.attacker-row { background: rgba(196,90,90,0.08); }
.defender-row { background: rgba(80,120,210,0.08); }

/* ---------- CSV-spezifische Tabelle (Alias) ---------- */
.csv-tabelle { composes: table; }  /* falls PostCSS nicht genutzt, einfach .table in HTML verwenden */

/* ---------- Seekarte ---------- */
/* Admin-Panel zur Kartenkonfiguration */
.admin-controls {
  display: flex; flex-wrap: wrap; align-items: center; gap: .7rem;
  background: var(--bg-panel);
  border: 1px solid var(--line);
  border-radius: var(--radius);
  padding: .7rem .9rem;
}
.admin-controls input {
  width: 5rem; text-align: center;
}

/* Kartengrid: Welt -> Inseln als Pixel */
.map-grid {
  display: grid;
  grid-template-columns: repeat(var(--map-cols, 120), 8px);
  grid-auto-rows: 8px;
  gap: 1px;
  background: var(--bg-muted);
  border: 1px solid var(--line);
  border-radius: var(--radius);
  padding: 6px;
  box-shadow: var(--shadow);
  overflow: auto;
  max-height: 74vh;
}

/* Zelle (Insel/Ozean) */
.map-cell {
  width: 8px; height: 8px;
  border-radius: 1px;
  transition: transform .08s ease, box-shadow .12s ease, background-color .12s ease;
}

/* Zustände */
.island--ocean    { background: var(--ocean); }
.island--free     { background: var(--island-free); }
.island--solo     { background: var(--island-solo); } /* allianzlos besetzt */

/* Allianz-Status (Beispielklassen) */
.island--ally     { background: var(--ally-friend); }
.island--neutral  { background: var(--ally-neutral); }
.island--enemy    { background: var(--ally-enemy-1); }
.island--enemy-2  { background: var(--ally-enemy-2); }
.island--enemy-3  { background: var(--ally-enemy-3); }

.map-cell:hover {
  transform: scale(1.8);
  box-shadow: 0 0 6px rgba(255,255,255,0.6);
  z-index: 5;
}

/* Tooltip-Platzhalter (für zukünftiges Hover-Info) */
.tooltip {
  position: absolute;
  background: var(--bg-elev);
  color: var(--text);
  border: 1px solid var(--line);
  border-radius: var(--radius-sm);
  padding: .35rem .5rem;
  font-size: .8rem;
  pointer-events: none;
  box-shadow: var(--shadow);
}

/* ---------- Auth-Seiten (Login/Logout/Gate) ---------- */
body.auth {
  display: grid;
  place-items: center;
  background: var(--bg-deep);
}

.auth-card {
  width: min(420px, 92vw);
  background: rgba(18,24,30,0.9);
  border: 1px solid var(--line);
  border-radius: var(--radius);
  box-shadow: var(--shadow);
  padding: 1.2rem 1.1rem;
  text-align: center;
}

.auth-card h1 {
  margin: 0 0 .6rem 0;
  color: var(--heading);
  text-transform: uppercase;
  letter-spacing: .08em;
  font-size: 1.2rem;
}

.auth-card p { color: var(--text-soft); margin: .3rem 0; }

.auth-card form {
  display: grid; gap: .7rem;
  margin-top: .6rem;
}

.auth-hint {
  margin-top: .7rem;
  font-size: .85rem;
  color: var(--text-dim);
}
.auth-hint a { color: var(--text); text-decoration: none; font-weight: 700; }
.auth-hint a:hover { text-decoration: underline; }

/* ---------- Utilities ---------- */
.mono { font-family: var(--font-mono); }
.center { text-align: center; }
.right { text-align: right; }
.m-0 { margin: 0; }
.mt-0 { margin-top: 0; }
.mb-0 { margin-bottom: 0; }
.mt-1 { margin-top: .5rem; }
.mb-1 { margin-bottom: .5rem; }
.p-0 { padding: 0; }
.p-1 { padding: .5rem; }
.hidden { display: none !important; }

hr {
  border: 0; border-top: 1px solid var(--line);
  margin: .8rem 0;
}
code, pre {
  font-family: var(--font-mono);
  background: var(--bg-elev);
  border: 1px solid var(--line);
  border-radius: var(--radius-sm);
  padding: .1rem .3rem;
}

/* Dezentere Scrollbars */
.table-wrapper::-webkit-scrollbar,
.map-grid::-webkit-scrollbar,
.live-feed::-webkit-scrollbar {
  height: 10px; width: 10px;
}
.table-wrapper::-webkit-scrollbar-thumb,
.map-grid::-webkit-scrollbar-thumb,
.live-feed::-webkit-scrollbar-thumb {
  background: #2f363b; border-radius: 6px;
}
.table-wrapper::-webkit-scrollbar-thumb:hover,
.map-grid::-webkit-scrollbar-thumb:hover,
.live-feed::-webkit-scrollbar-thumb:hover {
  background: #444;
}

/* Fokus sichtbar für Tastatur-Nutzer */
:focus-visible {
  outline: 2px solid var(--focus);
  outline-offset: 2px;
}